<!DOCTYPE html>
<html lang="uk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>üîÆ –ö—Ä–∏—à—Ç–∞–ª–µ–≤–∞ –ö—É–ª—è –ü—Ä–æ—Ä–æ—Ü—Ç–≤ AR</title>

    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/mind-ar@1.2.3/dist/mindar-image-aframe.prod.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/aframe-particle-system-component@1.1.3/dist/aframe-particle-system-component.min.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/aframe-text-geometry-component@0.5.1/dist/aframe-text-geometry-component.min.js"></script>
    
    <style>
        /* –ê–î–ê–ü–¢–ò–í–ù–Ü–°–¢–¨: –ó–∞–±–µ–∑–ø–µ—á–µ–Ω–Ω—è –ø–æ–≤–Ω–æ–µ–∫—Ä–∞–Ω–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É –Ω–∞ –≤—Å—ñ—Ö –ø—Ä–∏—Å—Ç—Ä–æ—è—Ö */
        body {
            margin: 0;
            padding: 0;
            background: #000;
            font-family: Arial, sans-serif;
            /* –ó–∞–±–æ—Ä–æ–Ω—è—î –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
            overflow: hidden; 
            /* –§—ñ–∫—Å—É—î —Ä–æ–∑–º—ñ—Ä –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ */
            width: 100vw;
            height: 100vh;
        }
        
        a-scene {
            display: block;
            width: 100%;
            height: 100%;
        }

        /* –ï–∫—Ä–∞–Ω –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è */
        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            color: #fff;
            text-align: center; /* –í–∏—Ä—ñ–≤–Ω—é–≤–∞–Ω–Ω—è —Ç–µ–∫—Å—Ç—É */
        }
        
        .loading-spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #333;
            border-top: 5px solid #8a2be2;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        .hidden {
            display: none !important;
        }
        
        /* –Ü–Ω—Å—Ç—Ä—É–∫—Ü—ñ—è (–∞–¥–∞–ø—Ç–∏–≤–Ω–∏–π –±–ª–æ–∫) */
        #instruction {
            position: absolute;
            bottom: 50px; /* –ó–±—ñ–ª—å—à–µ–Ω–æ –≤—ñ–¥—Å—Ç—É–ø –≤—ñ–¥ –∫—Ä–∞—é –¥–ª—è –º–æ–±—ñ–ª—å–Ω–∏—Ö –ø—Ä–∏—Å—Ç—Ä–æ—ó–≤ */
            left: 50%;
            transform: translateX(-50%); /* –¶–µ–Ω—Ç—Ä—É–≤–∞–Ω–Ω—è –ø–æ X */
            max-width: 90%; /* –û–±–º–µ–∂–µ–Ω–Ω—è —à–∏—Ä–∏–Ω–∏ */
            text-align: center;
            color: white;
            background: rgba(0,0,0,0.8);
            padding: 15px;
            border-radius: 8px;
            font-size: 1.1em;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <div id="loading-screen">
        <div class="loading-spinner"></div>
        <p>–ó–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è –º–∞–≥—ñ—ó...</p>
    </div>

    <div id="instruction" class="hidden">
        üëÜ –¢–æ—Ä–∫–Ω—ñ—Ç—å—Å—è –∫—Ä–∏—à—Ç–∞–ª–µ–≤–æ—ó –∫—É–ª—ñ, —â–æ–± –ø–æ–±–∞—á–∏—Ç–∏ –ø—Ä–æ—Ä–æ—Ü—Ç–≤–æ
    </div>

    <a-scene 
        mindar-image="imageTargetSrc: marker.mind; autoStart: false;" 
        color-space="sRGB" 
        embedded 
        renderer="colorManagement: true, physicallyCorrectLights"
        vr-mode-ui="enabled: false"
        device-orientation-permission-ui="enabled: false"
        id="main-scene"
    >
        
        <a-assets>
            <audio id="fon" src="assets/sounds/fon.mp3" preload="auto"></audio>
            <audio id="fon1" src="assets/sounds/fon1.mp3" preload="auto"></audio>
            <a-asset-item id="optimer-font" src="assets/fonts/optimer_bold.typeface.json"></a-asset-item>
            
            <script id="vertexShader" type="x-shader/x-vertex">
                varying vec3 vNormal;
                varying vec3 vPosition;
                
                void main() {
                    vNormal = normalize(normalMatrix * normal);
                    vPosition = position;
                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
                }
            </script>
        </a-assets>

        <a-camera active="false" position="0 0 0">
            <a-cursor raycaster="objects: .clickable" color="#FFF" opacity="0.5"></a-cursor>
        </a-camera>

        <a-entity mindar-image-target="targetIndex: 0" id="marker-anchor">
            
            <a-sphere 
                id="crystal-ball"
                class="clickable"
                radius="0.3" 
                position="0 0.4 0"
                material="shader: custom; opacity: 0.3; refractionRatio: 0.95;"
                crystal-ball
                cursor-listener> </a-sphere>
            
            <a-sphere 
                id="inner-glow"
                radius="0.25" 
                position="0 0.4 0"
                material="shader: flat; color: #4a00e0; opacity: 0.5; transparent: true"
                inner-glow>
            </a-sphere>
            
            <a-ring 
                id="aura"
                radius-inner="0.35" 
                radius-outer="0.5" 
                position="0 0.4 0"
                rotation="-90 0 0"
                material="shader: flat; color: #8a2be2; opacity: 0.3; transparent: true"
                aura-effect>
            </a-ring>
            
            <a-entity 
                id="prophecy-text"
                position="0 0.4 0"
                rotation="0 0 0"
                text-reveal
                visible="false"
                font="#optimer-font"> </a-entity>
            
            <a-cylinder 
                radius="0.4" 
                height="0.1" 
                position="0 0.05 0"
                material="color: #2c2c2c; roughness: 0.8">
            </a-cylinder>
            
            <a-entity 
                particle-system="preset: star; color: #8a2be2, #00bfff; particleCount: 30; size: 0.1; velocityValue: 0.2 0.5 0.2"
                position="0 0.4 0"
                magic-particles>
            </a-entity>
        </a-entity>
    </a-scene>

    <script>
        // 1. –ö–ê–°–¢–û–ú–ù–ò–ô –®–ï–ô–î–ï–† –î–õ–Ø –ö–†–ò–®–¢–ê–õ–ï–í–û–á –ö–£–õ–Ü
        AFRAME.registerShader('custom', {
            schema: {
                time: {type: 'time', is: 'uniform', default: 0}, // –î–æ–¥–∞–Ω–æ –¥–µ—Ñ–æ–ª—Ç
                opacity: {type: 'number', is: 'uniform', default: 0.3},
                refractionRatio: {type: 'number', is: 'uniform', default: 0.95}
            },
            
            vertexShader: document.getElementById('vertexShader').textContent,
            
            fragmentShader: `
                varying vec3 vNormal;
                varying vec3 vPosition;
                uniform float time;
                uniform float opacity;
                uniform float refractionRatio;
                
                void main() {
                    vec3 normal = normalize(vNormal);
                    float intensity = pow(0.7 - dot(normal, vec3(0.0, 0.0, 1.0)), 4.0);
                    
                    vec3 baseColor = vec3(0.3, 0.1, 0.8);
                    // –ü—É–ª—å—Å–∞—Ü—ñ—è –∫–æ–ª—å–æ—Ä—É, –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ time (–≤ —Å–µ–∫—É–Ω–¥–∞—Ö)
                    vec3 pulseColor = baseColor * (0.8 + 0.2 * sin(time * 0.005)); 
                    
                    vec3 refracted = refract(vec3(0.0, 0.0, 1.0), normal, refractionRatio);
                    float refractionEffect = dot(refracted, refracted);
                    
                    vec3 finalColor = mix(pulseColor, vec3(1.0), intensity * 0.3);
                    finalColor += refractionEffect * 0.1;
                    
                    gl_FragColor = vec4(finalColor, opacity * (0.7 + 0.3 * intensity));
                }
            `
        });

        // 2. –ö–û–ú–ü–û–ù–ï–ù–¢–ò –ê–ù–Ü–ú–ê–¶–Ü–á (–±–µ–∑ –∑–º—ñ–Ω, –æ—Å–∫—ñ–ª—å–∫–∏ –≤–æ–Ω–∏ –∫–æ—Ä–µ–∫—Ç–Ω—ñ)
        AFRAME.registerComponent('inner-glow', {
            init: function() {
                this.el.setAttribute('animation', {
                    property: 'components.material.material.opacity',
                    to: '0.8',
                    dir: 'alternate',
                    dur: 2000,
                    loop: true,
                    easing: 'easeInOutSine'
                });
            }
        });

        AFRAME.registerComponent('aura-effect', {
            init: function() {
                this.el.setAttribute('animation', {
                    property: 'scale',
                    to: '1.2 1.2 1.2',
                    dir: 'alternate',
                    dur: 3000,
                    loop: true,
                    easing: 'easeInOutSine'
                });
            }
        });

        AFRAME.registerComponent('magic-particles', {
            init: function() {
                this.active = false;
            },
            
            activate: function() {
                if (!this.active) {
                    this.active = true;
                    // –ë—ñ–ª—å—à–µ —á–∞—Å—Ç–∏–Ω–æ–∫ –¥–ª—è –≤–∏–±—É—Ö—É
                    this.el.setAttribute('particle-system', 'particleCount', 150);
                    
                    setTimeout(() => {
                        // –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –¥–æ –±–∞–∑–æ–≤–æ—ó –∫—ñ–ª—å–∫–æ—Å—Ç—ñ
                        this.el.setAttribute('particle-system', 'particleCount', 30);
                        this.active = false;
                    }, 1500);
                }
            }
        });
        
        // 3. –ö–û–ú–ü–û–ù–ï–ù–¢ –î–õ–Ø –í–ò–ì–ù–£–¢–û–ì–û –¢–ï–ö–°–¢–£ –ó –ü–û–ö–†–û–ö–û–í–ò–ú –í–Ü–î–û–ë–†–ê–ñ–ï–ù–ù–Ø–ú
        AFRAME.registerComponent('text-reveal', {
            schema: {
                text: {type: 'string', default: '–í–∞—à–µ –ø—Ä–æ—Ä–æ—Ü—Ç–≤–æ —á–µ–∫–∞—î –Ω–∞ –≤–∞—Å...'},
                radius: {type: 'number', default: 0.5},
            },
            
            init: function() {
                this.revealing = false;
                this.currentText = '';
                this.charIndex = 0;
            },
            
            startReveal: function(text) {
                if (this.revealing) return;
                
                this.revealing = true;
                this.currentText = text.toUpperCase(); // –ö—Ä–∞—â–µ –¥–ª—è 3D-—Ç–µ–∫—Å—Ç—É
                this.charIndex = 0;
                this.el.setAttribute('visible', true);
                
                this.createCurvedText();
                this.revealNextChar();
            },
            
            createCurvedText: function() {
                while(this.el.firstChild) {
                    this.el.removeChild(this.el.firstChild);
                }
                
                const radius = this.data.radius;
                const text = this.currentText;
                const chars = text.split('');
                // –†–µ–≥—É–ª—é—î–º–æ –∫—É—Ç–æ–≤–∏–π –∫—Ä–æ–∫, —â–æ–± —Ç–µ–∫—Å—Ç –Ω–µ –ø–µ—Ä–µ–∫—Ä–∏–≤–∞–≤—Å—è
                const angleStep = (Math.PI * 1.5) / chars.length; 
                
                chars.forEach((char, index) => {
                    const angle = -Math.PI * 0.75 + angleStep * index; // –ü–æ—á–∏–Ω–∞—î–º–æ –∑–ª—ñ–≤–∞
                    const x = Math.cos(angle) * radius;
                    const z = Math.sin(angle) * radius;
                    const rotationY = (angle + Math.PI/2) * (180/Math.PI);
                    
                    const charEntity = document.createElement('a-entity');
                    charEntity.setAttribute('position', `${z} 0 ${-x}`); // –ö–æ—Ä–µ–∫—Ü—ñ—è –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç –¥–ª—è –≤–µ—Ä—Ç–∏–∫–∞–ª—å–Ω–æ–≥–æ –≤—ñ–¥–æ–±—Ä–∞–∂–µ–Ω–Ω—è
                    charEntity.setAttribute('rotation', `0 ${rotationY} 0`);
                    charEntity.setAttribute('text', {
                        value: char,
                        align: 'center',
                        color: '#00bfff', // –§—ñ–Ω–∞–ª—å–Ω–∏–π –∫–æ–ª—ñ—Ä
                        width: 1.5,
                        opacity: 0,
                        font: '#optimer-font'
                    });
                    charEntity.setAttribute('class', 'text-char');
                    charEntity.setAttribute('data-index', index);
                    
                    this.el.appendChild(charEntity);
                });
            },
            
            revealNextChar: function() {
                if (this.charIndex >= this.currentText.length) {
                    this.revealing = false;
                    return;
                }
                
                const charEntity = this.el.querySelector(`[data-index="${this.charIndex}"]`);
                if (charEntity) {
                    charEntity.setAttribute('animation', {
                        property: 'text.opacity',
                        to: '1',
                        dur: 50,
                        easing: 'easeOut'
                    });
                    
                    // –î–æ–¥–∞—î–º–æ –µ—Ñ–µ–∫—Ç –ø—É–ª—å—Å–∞—Ü—ñ—ó –∫–æ–ª—å–æ—Ä—É –ø—ñ—Å–ª—è –ø–æ—è–≤–∏
                    charEntity.setAttribute('animation__color', {
                        property: 'text.color',
                        from: '#8a2be2',
                        to: '#00bfff',
                        dir: 'alternate',
                        dur: 2000,
                        loop: true,
                    });
                }
                
                this.charIndex++;
                setTimeout(() => this.revealNextChar(), 30); // –ó–±—ñ–ª—å—à–µ–Ω–æ —à–≤–∏–¥–∫—ñ—Å—Ç—å –¥–ª—è –∫—Ä–∞—â–æ–≥–æ –¥–æ—Å–≤—ñ–¥—É
            }
        });
        
        // 4. –û–°–ù–û–í–ù–ê –õ–û–ì–Ü–ö–ê –î–û–î–ê–¢–ö–£
        document.addEventListener('DOMContentLoaded', function() {
            const scene = document.querySelector('a-scene');
            const loadingScreen = document.getElementById('loading-screen');
            const instruction = document.getElementById('instruction');
            const crystalBall = document.getElementById('crystal-ball');
            const innerGlow = document.getElementById('inner-glow');
            const prophecyText = document.getElementById('prophecy-text');
            const particles = document.querySelector('[magic-particles]');
            const aura = document.getElementById('aura');
            const backgroundSound = document.getElementById('fon');
            const magicSound = document.getElementById('fon1');
            
            let systemReady = false;
            let prophecyActive = false;
            
            const prophecies = [
                "–®–ª—è—Ö –¥–æ –£—Å–ø—ñ—Ö—É –ª–µ–∂–∏—Ç—å —á–µ—Ä–µ–∑ –∑–Ω–∞–Ω–Ω—è —Ç–∞ –ù–∞–ø–æ–ª–µ–≥–ª–∏–≤—ñ—Å—Ç—å",
                "–ù–æ–≤—ñ –ú–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –≤—ñ–¥–∫—Ä–∏—é—Ç—å—Å—è –ø–µ—Ä–µ–¥ –≤–∞–º–∏ –¥—É–∂–µ —Å–∫–æ—Ä–æ",
                "–î–æ–≤—ñ—Ä—è–π—Ç–µ —Å–≤–æ—ó–π –Ü–Ω—Ç—É—ó—Ü—ñ—ó - –≤–æ–Ω–∞ –ø—Ä–∏–≤–µ–¥–µ –≤–∞—Å –¥–æ –º–µ—Ç–∏",
                "–ó—É—Å—Ç—Ä—ñ—á –∑ –≤–∞–∂–ª–∏–≤–æ—é –ª—é–¥–∏–Ω–æ—é –ó–º—ñ–Ω–∏—Ç—å –≤–∞—à–µ –∂–∏—Ç—Ç—è",
                "–í–∞—à–∞ –¢–≤–æ—Ä—á—ñ—Å—Ç—å –ø—Ä–∏–Ω–µ—Å–µ –Ω–µ—Å–ø–æ–¥—ñ–≤–∞–Ω—ñ –ø–ª–æ–¥–∏",
                "–ü–æ–¥–æ—Ä–æ–∂ –≤—ñ–¥–∫—Ä–∏—î –ù–æ–≤—ñ –ì–æ—Ä–∏–∑–æ–Ω—Ç–∏ –¥–ª—è —Ä–æ–∑–≤–∏—Ç–∫—É",
                "–í—ñ—Ä–∞ –≤ —Å–µ–±–µ - –ö–ª—é—á –¥–æ –ø–æ–¥–æ–ª–∞–Ω–Ω—è –±—É–¥—å-—è–∫–∏—Ö –ø–µ—Ä–µ—à–∫–æ–¥"
            ];
            
            // ‚ö†Ô∏è –í–ò–ü–†–ê–í–õ–ï–ù–ù–Ø: –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è AR —Ç–∞ –∑–≤—É–∫—É –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ü–µ–Ω–∏
            scene.addEventListener('loaded', function() {
                const mindarSystem = scene.systems["mindar-image-system"];
                
                // –¶–µ –ø–æ—Ç—Ä—ñ–±–Ω–æ, —â–æ–± –æ—Ç—Ä–∏–º–∞—Ç–∏ –¥–æ–∑–≤—ñ–ª –Ω–∞ –∫–∞–º–µ—Ä—É
                mindarSystem.start(); 
                
                // –ó–∞–ø—É—Å–∫ —Ñ–æ–Ω–æ–≤–æ–≥–æ –∑–≤—É–∫—É –ø—ñ—Å–ª—è –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è —Å—Ü–µ–Ω–∏ (–ø–æ—Ç—Ä—ñ–±–µ–Ω –∂–µ—Å—Ç –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞)
                backgroundSound.volume = 0.3;
                backgroundSound.loop = true;
                backgroundSound.play().catch(e => console.log('Auto-play blocked, wait for user interaction'));

                loadingScreen.classList.add('hidden');
                instruction.classList.remove('hidden');
                systemReady = true;

                // ‚ö†Ô∏è –ê–¥–∞–ø—Ç–∞—Ü—ñ—è UX: –ü—Ä–∏—Ö–æ–≤–∞—Ç–∏ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –∫–ª—ñ–∫—É, —â–æ–± –Ω–µ –∑–∞–≤–∞–∂–∞–ª–∞
                document.body.addEventListener('touchstart', function handleFirstInteraction() {
                    // –ü—Ä–æ–±—É—î–º–æ –≤—ñ–¥—Ç–≤–æ—Ä–∏—Ç–∏ –∑–≤—É–∫ –ø—ñ—Å–ª—è –ø–µ—Ä—à–æ–≥–æ –¥–æ—Ç–∏–∫—É, —è–∫—â–æ –Ω–µ –≤—ñ–¥—Ç–≤–æ—Ä–∏–≤—Å—è —Ä–∞–Ω—ñ—à–µ
                    backgroundSound.play().catch(e => {}); 
                    document.body.removeEventListener('touchstart', handleFirstInteraction);
                });
            });
            
            // –û–±—Ä–æ–±–Ω–∏–∫ –∫–ª—ñ–∫—É –ø–æ –∫—É–ª—ñ
            crystalBall.addEventListener('click', function() {
                if (!systemReady || prophecyActive) return;
                
                startProphecy();
            });
            
            function startProphecy() {
                prophecyActive = true;
                
                // 1. –ü—Ä–∏—Ö–æ–≤—É—î–º–æ —ñ–Ω—Å—Ç—Ä—É–∫—Ü—ñ—é, —è–∫—â–æ –≤–æ–Ω–∞ —â–µ –≤–∏–¥–∏–º–∞
                instruction.classList.add('hidden');
                
                // –í–∏–±–∏—Ä–∞—î–º–æ –≤–∏–ø–∞–¥–∫–æ–≤–µ –ø—Ä–æ—Ä–æ—Ü—Ç–≤–æ
                const randomProphecy = prophecies[Math.floor(Math.random() * prophecies.length)];
                
                // 1. –§–∞–∑–∞ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –µ–Ω–µ—Ä–≥—ñ—ó
                crystalBall.setAttribute('animation__charge', {
                    property: 'components.material.material.uniforms.time.value',
                    to: 5000,
                    dur: 1000,
                    easing: 'easeInQuad',
                    startEvents: 'click' 
                });
                
                innerGlow.setAttribute('animation__glow', {
                    property: 'components.material.material.opacity',
                    to: 1.0,
                    dur: 1000,
                    easing: 'easeInQuad',
                    startEvents: 'click'
                });
                
                // 2. –í–∏–±—É—Ö –µ–Ω–µ—Ä–≥—ñ—ó (–∑–∞—Ç—Ä–∏–º–∫–∞ 1000–º—Å)
                setTimeout(() => {
                    // –°–ø–∞–ª–∞—Ö —Å–≤—ñ—Ç–ª–∞
                    aura.setAttribute('material', 'opacity', 0.8);
                    aura.setAttribute('animation', {
                        property: 'scale',
                        to: '2 2 2',
                        dur: 300,
                        easing: 'easeOutQuad'
                    });
                    
                    particles.components['magic-particles'].activate();
                    
                    // –ì—Ä–∞—î–º–æ –∑–≤—É–∫ –º–∞–≥—ñ—ó
                    magicSound.currentTime = 0;
                    magicSound.volume = 0.7;
                    magicSound.play();
                    
                    // 3. –ü–æ—è–≤–∞ —Ç–µ–∫—Å—Ç—É (–∑–∞—Ç—Ä–∏–º–∫–∞ 500–º—Å –ø—ñ—Å–ª—è –≤–∏–±—É—Ö—É)
                    setTimeout(() => {
                        prophecyText.components['text-reveal'].startReveal(randomProphecy);
                        
                        // 4. –°—Ç–∞–±—ñ–ª—ñ–∑–∞—Ü—ñ—è (–∑–∞—Ç—Ä–∏–º–∫–∞ 3000–º—Å –ø—ñ—Å–ª—è –ø–æ—á–∞—Ç–∫—É –ø—Ä–æ—è–≤–ª–µ–Ω–Ω—è —Ç–µ–∫—Å—Ç—É)
                        setTimeout(() => {
                            // –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –∫—É–ª—ñ –¥–æ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–≥–æ —Å—Ç–∞–Ω—É
                            crystalBall.setAttribute('animation__charge_reset', {
                                property: 'components.material.material.uniforms.time.value',
                                to: 20000,
                                dur: 3000,
                                easing: 'easeOutQuad'
                            });
                            
                            // –ü–æ–≤–µ—Ä–Ω–µ–Ω–Ω—è –≤–Ω—É—Ç—Ä—ñ—à–Ω—å–æ–≥–æ —Å–≤—ñ—Ç—ñ–Ω–Ω—è –¥–æ —Ü–∏–∫–ª—ñ—á–Ω–æ–≥–æ —Ä–µ–∂–∏–º—É
                            innerGlow.setAttribute('animation__glow', {
                                property: 'components.material.material.opacity',
                                to: 0.3,
                                dur: 3000,
                                easing: 'easeOutQuad'
                            });
                            
                            aura.setAttribute('material', 'opacity', 0.3);
                            aura.setAttribute('scale', '1 1 1');
                            
                            // –î–æ–∑–≤–æ–ª—è—î–º–æ –Ω–æ–≤–µ –ø—Ä–æ—Ä–æ—Ü—Ç–≤–æ —á–µ—Ä–µ–∑ 5 —Å–µ–∫—É–Ω–¥
                            setTimeout(() => {
                                prophecyActive = false;
                                instruction.classList.remove('hidden');
                                instruction.textContent = 'üëÜ –ó–Ω–æ–≤—É —Ç–æ—Ä–∫–Ω—ñ—Ç—å—Å—è –∫—É–ª—ñ –¥–ª—è –Ω–æ–≤–æ–≥–æ –ø—Ä–æ—Ä–æ—Ü—Ç–≤–∞.';
                            }, 5000);
                            
                        }, 3000);
                  }, 500);
                }, 1000);
            }
        });
    </script>
</body>
</html>
